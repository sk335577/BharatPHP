
include('pdo_wrapper_class.php');
include('dd.php');

#############################################################
$pdo = new PdoWrapper();
$pdo->pdoConnect($CONF[db_server], $CONF[db_user], $CONF[db_password], $CONF[db_database]);
$pdo->useTablecols = 1;
$pdo->useDatadumper = 1;
$tablecols[pdo_wrapper_test] = array('id', 'lastname', 'age');

#############################################################
$sql = "drop table if exists pdo_wrapper_test";
$result = $pdo->pdoExecute($sql);

#############################################################
$sql = "CREATE TABLE pdo_wrapper_test(id INT UNSIGNED NOT NULL AUTO_INCREMENT ,lastname VARCHAR(255) NOT NULL ,age INT NOT NULL ,PRIMARY KEY (id) );";
$result = $pdo->pdoExecute($sql);

#############################################################
$insert[lastname] = 'Obama';
$insert[age] = 45;
$result = $pdo->pdoInsUpd('pdo_wrapper_test', $insert);
$id = $pdo->pdoLastInsertId();
d($id);

#############################################################
$insert[lastname] = 'Churchill';
$insert[age] = 57;
$result = $pdo->pdoInsUpd('pdo_wrapper_test', $insert);
$id = $pdo->pdoLastInsertId();
d($id);

#############################################################
$insert[lastname] = 'Schwarzenegger';
$insert[age] = 52;
$result = $pdo->pdoInsUpd('pdo_wrapper_test', $insert);
d($pdo->sql);
$id = $pdo->pdoLastInsertId();
d($id);

#############################################################
$insert = array();
$insert[age] = 57;
$where[id] = $id;
$result = $pdo->pdoInsUpd('pdo_wrapper_test', $insert, 'update', $where);
d($pdo->sql);

#############################################################
$sql = "select id, lastname, age from pdo_wrapper_test where id=:id";
$data[id] = $id;
$row = $pdo->pdoGetRow($sql, $data);
d($row);

#############################################################
$sql = "delete from pdo_wrapper_test where id=:id";
$data[id] = 2;
$pdo->pdoExecute($sql, $data);

#############################################################
$sql = "select id, lastname, age from pdo_wrapper_test";
$rows = $pdo->pdoGetAll($sql);
d($rows);
$rows = $pdo->pdoGetAssoc($sql);
d($rows);

#############################################################
# generate Exception
#############################################################
echo "<hr><h2>Generate Exception<p>";
$sql = "slct";
$result = $pdo->pdoExecute($sql);2022-10-16 17:26:47 ERROR - BharatPHP\Error::log - Too few arguments to function BharatPHP\Model::getAll(), 0 passed in C:\wamp64\www\SK_Lab\BharatPHP\app\src\Controllers\HomeController.php on line 15 and at least 1 expected in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\Model.php on line 35
2022-10-16 17:29:16 ERROR - BharatPHP\Error::log - Too few arguments to function App\Models\Users::getAll(), 0 passed in C:\wamp64\www\SK_Lab\BharatPHP\app\src\Controllers\HomeController.php on line 15 and at least 1 expected in C:\wamp64\www\SK_Lab\BharatPHP\app\src\Models\Users.php on line 12
2022-10-16 17:30:49 ERROR - BharatPHP\Error::log - Too few arguments to function App\Models\Users::getAll(), 0 passed in C:\wamp64\www\SK_Lab\BharatPHP\app\src\Controllers\HomeController.php on line 15 and at least 1 expected in C:\wamp64\www\SK_Lab\BharatPHP\app\src\Models\Users.php on line 12
2022-10-16 17:31:20 ERROR - BharatPHP\Error::log - Too few arguments to function App\Models\Users::getAll(), 0 passed in C:\wamp64\www\SK_Lab\BharatPHP\app\src\Controllers\HomeController.php on line 15 and at least 1 expected in C:\wamp64\www\SK_Lab\BharatPHP\app\src\Models\Users.php on line 12
2022-10-16 17:32:34 ERROR - BharatPHP\Error::log - Call to undefined method BharatPHP\Model::getDB() in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\Model.php on line 22
2022-10-16 17:50:24 ERROR - BharatPHP\Error::log - in_array(): Argument #2 ($haystack) must be of type array, string given in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\Error.php on line 86
2022-10-16 17:51:24 ERROR - BharatPHP\Error::log - in_array(): Argument #2 ($haystack) must be of type array, string given in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\Error.php on line 86
2022-10-16 17:52:57 ERROR - BharatPHP\Error::log - Using $this when not in object context in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\Model.php on line 72
2022-10-16 17:53:08 ERROR - BharatPHP\Error::log - in_array(): Argument #2 ($haystack) must be of type array, string given in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\Error.php on line 86
2022-10-16 17:53:52 ERROR - BharatPHP\Error::log - include_once(C:\wamp64\www\SK_Lab\BharatPHP/app/views/default/errors/404.phtml): Failed to open stream: No such file or directory in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\View.php on line 21
2022-10-16 17:54:22 ERROR - BharatPHP\Error::log - include_once(C:\wamp64\www\SK_Lab\BharatPHP/app/views/default/errors/404.phtml): Failed to open stream: No such file or directory in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\View.php on line 21
2022-10-16 17:55:06 ERROR - BharatPHP\Error::log - include_once(C:\wamp64\www\SK_Lab\BharatPHP/app/views/default/errors/404.phtml): Failed to open stream: No such file or directory in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\View.php on line 21
2022-10-16 17:56:21 ERROR - BharatPHP\Error::log - SQLSTATE[HY000]: General error: 1364 Field 'email' doesn't have a default value in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\Model.php on line 13
2022-10-16 17:56:51 ERROR - BharatPHP\Error::log - SQLSTATE[HY000]: General error: 1364 Field 'password' doesn't have a default value in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\Model.php on line 13
2022-10-16 18:03:06 ERROR - BharatPHP\Error::log - Undefined array key 1 in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\Model.php on line 116
2022-10-16 18:05:31 ERROR - BharatPHP\Error::log - Undefined array key 1 in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\Model.php on line 116
2022-10-16 18:05:34 ERROR - BharatPHP\Error::log - Undefined array key 1 in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\Model.php on line 116
2022-10-16 18:05:54 ERROR - BharatPHP\Error::log - Undefined array key 1 in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\Model.php on line 116
2022-10-16 18:05:59 ERROR - BharatPHP\Error::log - Undefined array key 1 in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\Model.php on line 116
2022-10-16 18:06:55 ERROR - BharatPHP\Error::log - Undefined array key 1 in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\Model.php on line 116
2022-10-16 18:07:12 ERROR - BharatPHP\Error::log - Undefined array key 1 in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\Model.php on line 117
2022-10-16 18:07:14 ERROR - BharatPHP\Error::log - Undefined array key 1 in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\Model.php on line 117
2022-10-16 18:07:41 ERROR - BharatPHP\Error::log - Undefined array key 1 in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\Model.php on line 117
2022-10-16 18:10:04 ERROR - BharatPHP\Error::log - Undefined variable $where_var in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\Model.php on line 119
2022-10-16 18:42:00 ERROR - BharatPHP\Error::log - You don't have permission to access this page in C:\wamp64\www\SK_Lab\BharatPHP\BharatPHP\Router.php on line 91
